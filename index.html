<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‹ãšã®ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800;900&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Hiragino Maru Gothic ProN', 'Meiryo', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f0f8ff;
    color: #333;
    overflow: hidden;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  #app {
    width: 100%;
    max-width: 800px;
    height: 100%;
    display: flex;
    flex-direction: column;
    text-align: center;
    position: relative;
  }

  .screen {
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
    padding: 20px;
    box-sizing: border-box;
  }
  .screen.active { display: flex; }

  h1 {
    font-size: 2.5rem;
    margin-bottom: 2rem;
    color: #444;
  }

  .settings {
    font-size: 1.8rem;
    margin-bottom: 3rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  label {
    cursor: pointer;
    background: #fff;
    padding: 20px 40px;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border: 4px solid transparent;
    transition: all 0.2s;
  }
  input[type="radio"] { display: none; }
  input[type="radio"]:checked + span { color: #ff6b6b; font-weight: bold; }
  label:has(input[type="radio"]:checked) { border-color: #ff6b6b; }

  button {
    font-size: 2rem;
    padding: 20px 60px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    box-shadow: 0 6px 0 #388E3C;
    transition: transform 0.1s, box-shadow 0.1s;
    font-weight: bold;
  }
  button:active { transform: translateY(6px); box-shadow: none; }

  #card-screen {
    cursor: pointer;
    user-select: none;
    justify-content: center;
    gap: 40px;
  }

  .number-display {
    font-family: 'M PLUS Rounded 1c','Hiragino Maru Gothic ProN','Meiryo',sans-serif;
    font-size: 18rem;
    font-weight: 900;
    color: #61d4e8; /* JSã§ä¸Šæ›¸ã */
    line-height: 1;
    -webkit-text-stroke: 8px #222;
    text-stroke: 8px #222;
    visibility: hidden;
  }

  .blocks-container {
    display: grid;
    grid-template-columns: repeat(5, 75px);
    grid-template-rows: repeat(2, 75px);
    background-color: #222;
    gap: 2px;
    border: 3px solid #222;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  }

  .cell {
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* ä¸¸ã®è‰²ã¯ JS ã§æ•°å­—ã¨åŒã˜è‰²ã«ä¸Šæ›¸ãã—ã¾ã™ */
  .circle {
    width: 50px;
    height: 50px;
    background-color: #61d4e8;
    border-radius: 50%;
  }

  .instruction {
    position: absolute;
    bottom: 20px;
    font-size: 1.5rem;
    color: #777;
    animation: blink 2s infinite;
  }
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }
</style>
</head>
<body>

<div id="app">
  <div id="start-screen" class="screen active">
    <h1>ã‹ãšã® ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</h1>
    <div class="settings">
      <label>
        <input type="radio" name="order" value="sequential" checked>
        <span>ã˜ã‚…ã‚“ã°ã‚“ (1ã€œ10)</span>
      </label>
      <label>
        <input type="radio" name="order" value="random">
        <span>ãƒãƒ©ãƒãƒ©</span>
      </label>
    </div>
    <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
  </div>

  <div id="card-screen" class="screen" onclick="handleTap()">
    <div id="number" class="number-display"></div>
    <div id="blocks" class="blocks-container"></div>
    <div class="instruction">ãŒã‚ã‚“ã‚’ ã‚¿ãƒƒãƒ—ã—ã¦ã­ğŸ‘†</div>
  </div>

  <div id="end-screen" class="screen">
    <h1>ãŠã—ã¾ã„ï¼</h1>
    <p style="font-size: 2rem; margin-bottom: 3rem;">ã‚ˆããŒã‚“ã°ã‚Šã¾ã—ãŸğŸ’®</p>
    <button onclick="resetGame()">ã‚‚ã©ã‚‹</button>
  </div>
</div>

<script>
  let numbers = [];
  let currentIndex = 0;
  let isShowingNumber = false;

  const startScreen = document.getElementById('start-screen');
  const cardScreen = document.getElementById('card-screen');
  const endScreen = document.getElementById('end-screen');
  const blocksContainer = document.getElementById('blocks');
  const numberDisplay = document.getElementById('number');

  // æ•°å­—ã”ã¨ã®è‰²ï¼ˆ1ã€œ10ï¼‰
  const numberColors = {
    1: "#ef4444",  // èµ¤
    2: "#22c55e",  // ç·‘
    3: "#3b82f6",  // é’
    4: "#f59e0b",  // ã‚ªãƒ¬ãƒ³ã‚¸
    5: "#8b5cf6",  // ç´«
    6: "#ec4899",  // ãƒ”ãƒ³ã‚¯
    7: "#14b8a6",  // ãƒ†ã‚£ãƒ¼ãƒ«
    8: "#06b6d4",  // ã‚·ã‚¢ãƒ³
    9: "#84cc16",  // é»„ç·‘
    10:"#6366f1"   // ã‚¤ãƒ³ãƒ‡ã‚£ã‚´
  };

  function startGame() {
    const order = document.querySelector('input[name="order"]:checked').value;
    numbers = [1,2,3,4,5,6,7,8,9,10];
    if (order === 'random') shuffle(numbers);

    currentIndex = 0;
    startScreen.classList.remove('active');
    cardScreen.classList.add('active');
    showCard();
  }

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  function showCard() {
    const currentNumber = numbers[currentIndex];
    const color = numberColors[currentNumber] || "#61d4e8";

    // æ ã®ä¸­èº«ã‚’ãƒªã‚»ãƒƒãƒˆ
    blocksContainer.innerHTML = '';

    // 10ãƒã‚¹ã®æ ã‚’ä½œã‚‹
    for (let i = 0; i < 10; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';

      // ç¾åœ¨ã®æ•°ã‚ˆã‚Šå°ã•ã‘ã‚Œã°ã€ãƒã‚¹ã®ä¸­ã«ä¸¸ã‚’å…¥ã‚Œã‚‹ï¼ˆâ˜…ä¸¸ã‚‚åŒã˜è‰²ï¼‰
      if (i < currentNumber) {
        const circle = document.createElement('div');
        circle.className = 'circle';
        circle.style.backgroundColor = color;   // â˜…æ•°å­—ã¨åŒã˜è‰²
        cell.appendChild(circle);
      }

      blocksContainer.appendChild(cell);
    }

    // æ•°å­—ã®æº–å‚™ï¼ˆâ˜…æ•°å­—ã‚‚åŒã˜è‰²ï¼‰
    numberDisplay.textContent = currentNumber;
    numberDisplay.style.color = color;          // â˜…ãƒ–ãƒ­ãƒƒã‚¯ã¨åŒã˜è‰²
    numberDisplay.style.visibility = 'hidden';
    isShowingNumber = false;
  }

  function handleTap() {
    if (!isShowingNumber) {
      numberDisplay.style.visibility = 'visible';
      isShowingNumber = true;
    } else {
      currentIndex++;
      if (currentIndex < numbers.length) {
        showCard();
      } else {
        cardScreen.classList.remove('active');
        endScreen.classList.add('active');
      }
    }
  }

  function resetGame() {
    endScreen.classList.remove('active');
    startScreen.classList.add('active');
  }
</script>

</body>
</html>
